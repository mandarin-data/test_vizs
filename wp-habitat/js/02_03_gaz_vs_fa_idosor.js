var svg3=d3.select("#topic02-vis03"),margin={top:20,right:80,bottom:30,left:50},width=+svg3.node().getBoundingClientRect().width-margin.left-margin.right,height=+svg3.attr("height")-margin.top-margin.bottom,g3=svg3.append("g").attr("transform","translate("+margin.left+","+margin.top+")"),parseTime=d3.timeParse("%Y%m%d"),x3=d3.scaleTime().range([0,width]),y3=d3.scaleLinear().range([height,0]),z3=d3.scaleOrdinal(d3.schemeCategory10),line=d3.line().curve(d3.curveBasis).x(function(t){return x3(t.date)}).y(function(t){return y3(t.arany)});function type(t,a,e){t.date=parseTime(t.date);for(var n=1,r=e.length,i;n<r;++n)t[i=e[n]]=+t[i];return t}d3.tsv("/wp-habitat/data/02_lakasminoseg_energiaszegenyseg/02_03_01_gaz_vs_fa_idosor_arany.tsv",type,function(t,e){var a,n,r;if(t)throw t;a=e.columns.slice(1).map(function(a){return{id:a,values:e.map(function(t){return{date:t.date,arany:t[a]}})}}),x3.domain(d3.extent(e,function(t){return t.date})),y3.domain([0,1]),z3.domain(a.map(function(t){return t.id})),g3.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+height+")").call(d3.axisBottom(x3)),g3.append("g").attr("class","axis axis--y").call(d3.axisLeft(y3)).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").attr("fill","#000").text("Adott fűtési módot használó háztartások aránya"),(n=g3.selectAll(".futesmod").data(a).enter().append("g").attr("class","futesmod")).append("path").attr("class","line").attr("d",function(t){return line(t.values)}).style("stroke",function(t){return z3(t.id)}),n.append("text").datum(function(t){return{id:t.id,value:t.values[t.values.length-1]}}).attr("transform",function(t){return"translate("+(x3(t.value.date)+30)+","+y3(t.value.arany)+")"}).attr("x",3).attr("dy","0.35em").style("font","10px sans-serif").text(function(t){return t.id}),r=g3.append("g").attr("class","mouse-over-effects")});